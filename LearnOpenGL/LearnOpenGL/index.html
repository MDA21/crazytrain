
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://mda21.github.io/crazytrain/LearnOpenGL/LearnOpenGL/">
      
      
        <link rel="prev" href="../../AeroRaster/">
      
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>LearnOpenGL备忘录 - Stand Alone Complex</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#opengl" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Stand Alone Complex" class="md-header__button md-logo" aria-label="Stand Alone Complex" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Stand Alone Complex
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              LearnOpenGL备忘录
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="切换到浅色模式"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="切换到浅色模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="切换到深色模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="切换到深色模式" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  首页

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../%E5%B7%A5%E7%A8%8B%E5%9C%B0%E8%B4%A8/%E5%B7%A5%E7%A8%8B%E5%9C%B0%E8%B4%A8%E7%9F%A5%E8%AF%86%E7%82%B9%E6%95%B4%E7%90%86/" class="md-tabs__link">
          
  
  
  课内笔记

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../TinyRenderer/" class="md-tabs__link">
          
  
  
  课外项目

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Stand Alone Complex" class="md-nav__button md-logo" aria-label="Stand Alone Complex" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Stand Alone Complex
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    首页
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    课内笔记
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    课内笔记
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%B7%A5%E7%A8%8B%E5%9C%B0%E8%B4%A8/%E5%B7%A5%E7%A8%8B%E5%9C%B0%E8%B4%A8%E7%9F%A5%E8%AF%86%E7%82%B9%E6%95%B4%E7%90%86/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    工程地质
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    课外项目
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    课外项目
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../TinyRenderer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TinyRenderer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../AeroRaster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AeroRaster
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    LearnOpenGL备忘录
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    LearnOpenGL备忘录
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#opengl" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenGL绘制核心流程概览
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      
        一些关键概念与api
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="一些关键概念与api">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        顶点缓冲对象
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        顶点数组对象
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        纹理加载
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uniform" class="md-nav__link">
    <span class="md-ellipsis">
      
        Uniform关键字
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#opengl" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenGL绘制核心流程概览
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      
        一些关键概念与api
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="一些关键概念与api">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        顶点缓冲对象
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        顶点数组对象
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        纹理加载
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uniform" class="md-nav__link">
    <span class="md-ellipsis">
      
        Uniform关键字
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



  <h1>LearnOpenGL备忘录</h1>

<p>这里是记录LearnOpenGL过程中的一些小笔记（？）</p>
<p>api，特别是不常常用的话，太容易忘记了</p>
<h2 id="opengl">OpenGL绘制核心流程概览</h2>
<p>一个典型的OpenGL程序（特别是使用核心模式时）的绘制流程可以概括为以下几个阶段。你可以把它当作一个检查清单来用：</p>
<table>
<thead>
<tr>
<th style="text-align: left;">阶段</th>
<th style="text-align: left;">核心任务</th>
<th style="text-align: left;">关键API/步骤</th>
<th style="text-align: left;">主要目的</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>初始化阶段</strong></td>
<td style="text-align: left;">创建窗口和OpenGL上下文</td>
<td style="text-align: left;"><code>glfwInit()</code>, <code>glfwCreateWindow()</code>, <code>gladLoadGL()</code></td>
<td style="text-align: left;">让程序具备与GPU通信的能力。</td>
</tr>
<tr>
<td style="text-align: left;"><strong>数据准备阶段</strong></td>
<td style="text-align: left;">创建VAO，绑定数据</td>
<td style="text-align: left;">① 生成并绑定<strong>VAO</strong>；② 生成并绑定<strong>VBO</strong>；③ 使用<code>glBufferData</code>传输顶点数据；④ 通过<code>glVertexAttribPointer</code>设置顶点属性解析方式；⑤ 启用顶点属性。</td>
<td style="text-align: left;">将CPU端的顶点数据（位置、颜色、纹理坐标等）上传到GPU，并告诉GPU如何解析这些数据。</td>
</tr>
<tr>
<td style="text-align: left;"><strong>资源准备阶段</strong></td>
<td style="text-align: left;">编译着色器与加载纹理</td>
<td style="text-align: left;">① 创建并编译<strong>顶点着色器</strong>和<strong>片段着色器</strong>；② 创建<strong>着色器程序</strong>并链接着色器；③ 生成纹理ID，绑定纹理，使用<code>glTexImage2D</code>加载图片数据，并设置纹理参数。</td>
<td style="text-align: left;">定义渲染的视觉效果和规则。</td>
</tr>
<tr>
<td style="text-align: left;"><strong>渲染循环</strong></td>
<td style="text-align: left;">执行绘制命令</td>
<td style="text-align: left;">① 清空屏幕（<code>glClear</code>）；② <strong>使用</strong>（<code>glUseProgram</code>）着色器程序；③ <strong>绑定</strong>（<code>glBindVertexArray</code>）对应的VAO；④ 调用绘制函数，如<code>glDrawArrays</code>或<code>glDrawElements</code>；⑤ 交换缓冲区（<code>glfwSwapBuffers</code>）。</td>
<td style="text-align: left;">告诉GPU开始渲染，并显示渲染结果。</td>
</tr>
<tr>
<td style="text-align: left;"><strong>资源释放</strong></td>
<td style="text-align: left;">清理对象</td>
<td style="text-align: left;"><code>glDeleteVertexArrays</code>, <code>glDeleteBuffers</code>, <code>glDeleteProgram</code>等</td>
<td style="text-align: left;">防止内存泄漏。</td>
</tr>
</tbody>
</table>
<h2 id="api">一些关键概念与api</h2>
<h3 id="_1">顶点缓冲对象</h3>
<p>VBO是第一个被创建的缓冲区，负责在GPU的显存中开辟一块空间，用来存放大量的顶点数据。</p>
<ul>
<li><code>glGenBuffers(GLsizei n, GLuint *buffers)</code></li>
<li><strong>作用</strong>：生成<code>n</code>个未使用的缓冲对象ID。</li>
<li><strong>参数</strong>：<code>n</code>是要生成的ID数量；<code>buffers</code>是存放ID的数组地址。</li>
<li><code>glBindBuffer(GLenum target, GLuint buffer)</code></li>
<li><strong>作用</strong>：将一个缓冲对象绑定到指定的目标上。OpenGL是个状态机，绑定后，所有对该目标的后续操作都将作用于这个缓冲区。</li>
<li><strong>参数</strong>：<code>target</code>通常是<code>GL_ARRAY_BUFFER</code>（表示顶点数据）；<code>buffer</code>是由<code>glGenBuffers</code>生成的ID。</li>
<li><code>glBufferData(GLenum target, GLsizeiptr size, const void *data, GLenum usage)</code></li>
<li><strong>作用</strong>：为当前绑定的缓冲区分配内存，并填充数据。</li>
<li><strong>参数</strong>：<code>target</code>应与<code>glBindBuffer</code>一致；<code>size</code>是数据的字节大小；<code>data</code>是指向源数据的指针；<code>usage</code>指定数据的使用方式，如<code>GL_STATIC_DRAW</code>（数据基本不变）或<code>GL_DYNAMIC_DRAW</code>（频繁变化），帮助GPU优化。</li>
</ul>
<h3 id="_2">顶点数组对象</h3>
<p>VAO就像一个“数据快递单”，它本身不存储顶点数据，而是存储了VBO的绑定关系和顶点属性的解析规则。使用VAO可以极大简化绘制多个不同物体时的代码。</p>
<ul>
<li><code>glGenVertexArrays(GLsizei n, GLuint *arrays)</code></li>
<li><code>glBindVertexArray(GLuint array)</code></li>
<li><strong>作用</strong>：绑定一个VAO。从此以后，所有对顶点属性的配置（如<code>glVertexAttribPointer</code>）都会被这个VAO记录下来。</li>
<li><strong>核心函数：<code>glVertexAttribPointer(GLuint index, GLint size, GLenum type, GLboolean normalized, GLsizei stride, const void \*pointer)</code></strong></li>
<li><strong>作用</strong>：<strong>这是最关键的函数之一</strong>。它告诉OpenGL，当前绑定的VBO中的数据应该如何解析。</li>
<li><strong>参数详解</strong>：<ul>
<li><code>index</code>：顶点属性的位置，与着色器中<code>layout(location = 0)</code>的值对应。</li>
<li><code>size</code>：每个属性的分量个数。例如位置是3个（x, y, z），纹理坐标是2个（u, v）。</li>
<li><code>type</code>：数据类型，通常是<code>GL_FLOAT</code>。</li>
<li><code>normalized</code>：是否希望整数类型的数据被映射到0到1或-1到1之间。对于<code>GL_FLOAT</code>类型的数据，通常设为<code>GL_FALSE</code>。</li>
<li><code>stride</code>：<strong>步长</strong>。指在同一个顶点的数据中，从这个属性到下一个顶点的同一属性之间间隔了多少字节。如果数据排列得很紧密，也可以设为0。</li>
<li><code>pointer</code>：<strong>偏移量</strong>。指在这个缓冲区中，当前这个属性从第几个字节开始。需要强制转换为<code>(void*)</code>类型。</li>
</ul>
</li>
<li><code>glEnableVertexAttribArray(GLuint index)</code></li>
<li><strong>作用</strong>：启用对应索引的顶点属性。默认是禁用的，必须手动启用，否则数据不会被传递到着色器。</li>
</ul>
<h3 id="_3">纹理加载</h3>
<p>纹理加载就是将一张图片上传到GPU，并建立一套采样规则。</p>
<ul>
<li><code>glGenTextures(GLsizei n, GLuint *textures)</code></li>
<li><code>glBindTexture(GLenum target, GLuint texture)</code></li>
<li><strong>作用</strong>：生成并绑定纹理对象。<code>target</code>对于普通2D纹理是<code>GL_TEXTURE_2D</code>。</li>
<li>加载图像数据：<code>glTexImage2D(GLenum target, GLint level, GLint internalformat, GLsizei width, GLsizei height, GLint border, GLenum format, GLenum type, const void \*data)</code></li>
<li><strong>作用</strong>：将图像数据从CPU内存传输到当前绑定的纹理对象上。</li>
<li><strong>参数详解</strong>：<ul>
<li><code>target</code>：纹理目标，2D纹理用<code>GL_TEXTURE_2D</code>。</li>
<li><code>level</code>：多级渐远纹理的级别，0表示基本级别。</li>
<li><code>internalformat</code>：你<strong>希望</strong>OpenGL<strong>将纹理存储</strong>为什么格式（如<code>GL_RGB</code>）。</li>
<li><code>width</code>, <code>height</code>：纹理的宽度和高度。</li>
<li><code>border</code>：历史遗留，必须为0。</li>
<li><code>format</code> 和 <code>type</code>：你<strong>发过来的数据</strong>是什么格式（如<code>GL_RGB</code>）和数据类型（如<code>GL_UNSIGNED_BYTE</code>）。</li>
<li><code>data</code>：指向图像数据的指针。</li>
</ul>
</li>
<li><strong>设置纹理参数：<code>glTexParameteri(GLenum target, GLenum pname, GLint param)</code></strong></li>
<li><strong>作用</strong>：设置纹理的环绕方式和过滤方式。</li>
<li><strong>示例</strong>：<code>glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR)</code> 设置缩小时的过滤方式为线性过滤。</li>
<li><strong>激活纹理单元：<code>glActiveTexture(GLenum texture)</code></strong></li>
<li><strong>作用</strong>：OpenGL提供多个纹理单元供你使用（如<code>GL_TEXTURE0</code>, <code>GL_TEXTURE1</code>）。在绑定纹理前，需要先激活目标纹理单元。</li>
<li><strong>在着色器中关联：<code>glUniform1i(glGetUniformLocation(shaderProgram, "texture1"), 0)</code></strong></li>
<li><strong>作用</strong>：将着色器中的<code>uniform sampler2D</code>变量（名为"texture1"）绑定到纹理单元0。这样，纹理单元0上绑定的纹理就会传递给着色器中的<code>texture1</code>变量。</li>
</ul>
<h3 id="uniform">Uniform关键字</h3>
<p>uniform是全局的。</p>
<p>如果你声明了一个uniform却在GLSL代码中没用过，编译器会静默移除这个变量，导致最后编译出的版本中并不会包含它，这可能导致几个非常麻烦的错误。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="cp">#version 330 core</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="k">out</span><span class="w"> </span><span class="kt">vec4</span><span class="w"> </span><span class="n">FragColor</span><span class="p">;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="k">uniform</span><span class="w"> </span><span class="kt">vec4</span><span class="w"> </span><span class="n">ourColor</span><span class="p">;</span><span class="w"> </span><span class="c1">// 在OpenGL程序代码中设定这个变量</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="kt">void</span><span class="w"> </span><span class="n">main</span><span class="p">()</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="p">{</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">    </span><span class="n">FragColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ourColor</span><span class="p">;</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="p">}</span>
</code></pre></div>
<p>绘制的时候进行修改：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kt">int</span><span class="w"> </span><span class="n">vertexColorLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">glGetUniformLocation</span><span class="p">(</span><span class="n">shaderProgram</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ourColor&quot;</span><span class="p">);</span><span class="w"> </span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="n">glUseProgram</span><span class="p">(</span><span class="n">shaderProgram</span><span class="p">);</span><span class="c1">//调用程序</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="n">glUniform4f</span><span class="p">(</span><span class="n">vertexColorLocation</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span><span class="w"> </span><span class="n">greenValue</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0f</span><span class="p">);</span>
</code></pre></div>
<p>我们用<code>glGetUniformLocation</code>查询<code>uniform ourColor</code>的位置值。我们为查询函数提供着色器程序和uniform的名字（这是我们希望获得的位置值的来源）。如果glGetUniformLocation返回<code>-1</code>就代表没有找到这个位置值。最后，我们可以通过<code>glUniform4f</code>函数设置uniform值。注意，查询uniform地址不要求你之前使用过着色器程序，但是更新一个uniform之前你必须先使用程序（调用<code>glUseProgram</code>)，因为它是在当前激活的着色器程序中设置uniform的。</p>
<p>OpenGL在其核心是一个C库，所以它不支持类型重载，在函数参数不同的时候就要为其定义新的函数；<code>glUniform</code>是一个典型例子。这个函数有一个特定的后缀，标识设定的uniform的类型。可能的后缀有：</p>
<table>
<thead>
<tr>
<th style="text-align: left;">后缀</th>
<th style="text-align: left;">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>f</code></td>
<td style="text-align: left;">函数需要一个float作为它的值</td>
</tr>
<tr>
<td style="text-align: left;"><code>i</code></td>
<td style="text-align: left;">函数需要一个int作为它的值</td>
</tr>
<tr>
<td style="text-align: left;"><code>ui</code></td>
<td style="text-align: left;">函数需要一个unsigned int作为它的值</td>
</tr>
<tr>
<td style="text-align: left;"><code>3f</code></td>
<td style="text-align: left;">函数需要3个float作为它的值</td>
</tr>
<tr>
<td style="text-align: left;"><code>fv</code></td>
<td style="text-align: left;">函数需要一个float向量/数组作为它的值</td>
</tr>
</tbody>
</table>
<p>每当你打算配置一个OpenGL的选项时就可以简单地根据这些规则选择适合你的数据类型的重载函数。在我们的例子里，我们希望分别设定uniform的4个float值，所以我们通过<code>glUniform4f</code>传递我们的数据(注意，我们也可以使用<code>fv</code>版本)。</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.top", "search.suggest", "search.highlight"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>